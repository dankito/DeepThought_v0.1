ext.buildTimestampe = new Date().format('yyyy-MM-dd HH:mm:ss')

// SOURCE_BUILD_NUMBER will be created by Jenkins with every build and then be written to an Environmental variable
version = new ProjectVersion(0, 1, 0, System.env.SOURCE_BUILD_NUMBER)


class ProjectVersion {
    Integer major
    Integer minor
    Integer revision
    String build


    ProjectVersion(Integer major, Integer minor, Integer revision, String build) {
        this.major = major
        this.minor = minor
        this.revision = revision
        this.build = build
    }

    @Override
    String toString() {
        String fullVersion = "$major.$minor.$revision"

        if(build) {
            fullVersion += ".$build";
        }

        fullVersion
    }

}